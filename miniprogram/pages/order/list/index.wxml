<!-- æˆ‘çš„è®¢å•é¡µé¢ -->
<view class="page-container">
  <!-- æ ‡ç­¾æ  -->
  <view class="tab-section">
    <view class="tab-list">
      <view 
        class="tab-item {{currentTab === item.key ? 'active' : ''}}"
        wx:for="{{tabs}}"
        wx:key="key"
        bindtap="onTabChange"
        data-key="{{item.key}}"
      >{{item.label}}</view>
    </view>
  </view>
  
  <!-- åŠ è½½ä¸­ -->
  <view class="loading-state" wx:if="{{loading && orders.length === 0}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>
  
  <!-- è®¢å•åˆ—è¡¨ -->
  <view class="order-list" wx:elif="{{orders.length > 0}}">
    <view 
      class="order-card"
      wx:for="{{orders}}"
      wx:key="id"
      bindtap="onOrderTap"
      data-id="{{item.id}}"
    >
      <!-- è®¢å•å¤´éƒ¨ -->
      <view class="order-header">
        <text class="course-name">{{item.course_name || 'æ™®é€š-è¿åŠ¨è¯¾1.5h(ç¬¬1å‘¨)'}}</text>
        <view class="order-status-amount">
          <text class="status-text {{item.status}}">{{item.status_text}}</text>
          <text class="amount-text">{{item.pay_amount || 0}}å…ƒ</text>
        </view>
      </view>
      
      <!-- åˆ†éš”çº¿ -->
      <view class="divider"></view>
      
      <!-- è®¢å•è¯¦æƒ… -->
      <view class="order-detail">
        <view class="detail-row">
          <text class="detail-label">è®¢å•ç¼–å·</text>
          <text class="detail-value">{{item.order_no}}</text>
        </view>
        <view class="detail-row">
          <text class="detail-label">è®¢å•å­¦å‘˜</text>
          <text class="detail-value">{{item.student_name || 'æœªçŸ¥'}}</text>
        </view>
        <view class="detail-row">
          <text class="detail-label">è®¢å•æ—¶é—´</text>
          <text class="detail-value">{{item.created_at_full}}</text>
        </view>
        <view class="detail-row">
          <text class="detail-label">æ”¯ä»˜æ–¹å¼</text>
          <text class="detail-value">{{item.pay_method || 'å¾®ä¿¡'}}</text>
        </view>
        <view class="detail-row">
          <text class="detail-label">å®ä»˜é‡‘é¢</text>
          <view class="detail-value price-value">
            <text class="original-price" wx:if="{{item.total_amount > item.pay_amount}}">æ€»ä»· Â¥{{item.total_amount}}</text>
            <text class="actual-price">Â¥{{item.pay_amount || 0}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>
  
  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:else>
    <view class="empty-icon">ğŸ“‹</view>
    <text class="empty-text">æš‚æ— è®¢å•è®°å½•</text>
    <button class="empty-btn" bindtap="goHome">å»çœ‹çœ‹è¯¾ç¨‹</button>
  </view>
  
  <!-- æœªç™»å½•æç¤ºæ‚¬æµ®å±‚ -->
  <view class="login-overlay" wx:if="{{!isLoggedIn}}">
    <view class="login-card">
      <view class="login-icon">ğŸ”</view>
      <text class="login-title">ç™»å½•åæŸ¥çœ‹è®¢å•</text>
      <text class="login-desc">ç™»å½•åå¯æŸ¥çœ‹æ‚¨çš„å…¨éƒ¨è®¢å•</text>
      <button class="login-btn" bindtap="goLogin">ç«‹å³ç™»å½•</button>
    </view>
  </view>
</view>
