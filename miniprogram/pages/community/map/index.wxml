<!-- åœ°å›¾é€‰æ‹©å°åŒºé¡µé¢ -->
<view class="page-container">
  <!-- æœç´¢æ  -->
  <view class="search-bar" bindtap="onOpenSearch">
    <view class="search-icon">ğŸ”</view>
    <text class="search-placeholder">æœç´¢å°åŒº</text>
  </view>
  
  <!-- åœ°å›¾ -->
  <map 
    id="communityMap"
    class="map"
    latitude="{{latitude}}"
    longitude="{{longitude}}"
    scale="{{scale}}"
    markers="{{markers}}"
    show-location
    enable-zoom
    enable-scroll
    bindmarkertap="onMarkerTap"
    bindtap="onMapTap"
    bindregionchange="onRegionChange"
  >
    <!-- å®šä½æŒ‰é’® -->
    <cover-view class="location-btn" bindtap="onMoveToLocation">
      <cover-view class="btn-icon">ğŸ“</cover-view>
    </cover-view>
    
    <!-- åˆ—è¡¨æŒ‰é’® -->
    <cover-view class="list-btn" bindtap="onViewList">
      <cover-view class="btn-icon">ğŸ“‹</cover-view>
      <cover-view class="btn-text">åˆ—è¡¨</cover-view>
    </cover-view>
  </map>
  
  <!-- é€‰ä¸­çš„å°åŒºä¿¡æ¯ -->
  <view class="community-panel {{selectedCommunity ? 'show' : ''}}">
    <view class="panel-content" wx:if="{{selectedCommunity}}">
      <view class="community-info">
        <view class="community-name">{{selectedCommunity.name}}</view>
        <view class="community-address">{{selectedCommunity.address}}</view>
        <view class="community-distance" wx:if="{{selectedCommunity.distanceText}}">
          è·æ‚¨ {{selectedCommunity.distanceText}}
        </view>
      </view>
      <button class="select-btn" bindtap="onSelectCommunity">é€‰æ‹©è¯¥å°åŒº</button>
    </view>
  </view>
</view>

<!-- æœç´¢å¼¹çª— -->
<view class="search-modal {{showSearch ? 'show' : ''}}">
  <view class="modal-header">
    <view class="modal-search-bar">
      <view class="search-icon">ğŸ”</view>
      <input 
        class="search-input"
        type="text"
        placeholder="æœç´¢å°åŒºåç§°"
        placeholder-class="search-placeholder"
        value="{{keyword}}"
        bindinput="onSearchInput"
        focus="{{showSearch}}"
      />
    </view>
    <text class="cancel-btn" bindtap="onCloseSearch">å–æ¶ˆ</text>
  </view>
  
  <view class="search-results">
    <view 
      class="result-item"
      wx:for="{{searchResults}}"
      wx:key="id"
      bindtap="onSelectSearchResult"
      data-item="{{item}}"
    >
      <view class="result-icon">ğŸ“</view>
      <view class="result-content">
        <view class="result-name">{{item.name}}</view>
        <view class="result-address">{{item.address}}</view>
      </view>
    </view>
    
    <view class="empty-results" wx:if="{{keyword && searchResults.length === 0}}">
      <text>æœªæ‰¾åˆ°ç›¸å…³å°åŒº</text>
    </view>
  </view>
</view>
