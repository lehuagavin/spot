# 义城上门教育 - 产品需求文档 (PRD)

## 文档信息

| 项目 | 内容 |
|------|------|
| 产品名称 | 义城上门教育 (Yicheng Home Education) |
| 产品类型 | 微信小程序 |
| 版本 | v1.0 |
| 文档状态 | 初稿 |

---

## 1. 产品概述

### 1.1 产品简介

义城上门教育是一款微信小程序平台，专注于为家长提供便捷的儿童体育培训课程预约服务。平台采用"拼班"模式，用户可以在所在小区附近选择合适的体育课程，与其他家长一起拼班，由专业教练上门授课。

### 1.2 目标用户

- **主要用户**：有 7-12 岁儿童的家长
- **次要用户**：小区运动主理人（代理人）

### 1.3 核心价值

- 国家体育总局指定考核点
- 专业场地，获取政府和多方扶持
- 专业教练上门授课
- 户外教学，快乐运动
- 保险护航，安全保障

---

## 2. 功能需求

### 2.1 启动流程

#### 2.1.1 隐私保护提示

**触发条件**：首次进入小程序

**界面元素**：
- 标题：用户隐私保护提示
- 内容：在你使用义城上门教育服务之前，请仔细阅读《义城上门教育小程序隐私保护指引》
- 隐私协议链接：可点击查看详情
- 操作按钮：
  - 【拒绝】：退出小程序
  - 【同意】：进入地理位置授权流程

#### 2.1.2 地理位置授权

**触发条件**：同意隐私协议后

**界面元素**：
- 系统弹窗：义城上门教育申请使用您的地理位置
- 操作按钮：
  - 【拒绝】：可继续使用，但需手动选择位置
  - 【允许】：获取用户位置，自动定位附近小区

---

### 2.2 首页模块

#### 2.2.1 页面结构

| 区域 | 功能描述 |
|------|----------|
| 顶部轮播图 | 展示平台特色和优势 |
| 定位区域 | 显示当前小区名称，支持切换定位 |
| 筛选标签 | 全部、进行中、已结束 |
| 课程列表 | 展示可拼班的课程卡片 |
| 底部导航 | 首页、权益卡、拼班、我的 |

#### 2.2.2 轮播图

**展示内容**：
- 国家体育总局指定考核点
- 专业场地，获取政府和多方扶持
- 参加 Top class，500元/节
- 10万家庭的共同选择

#### 2.2.3 课程列表卡片

**卡片信息**：
| 字段 | 说明 | 示例 |
|------|------|------|
| 课程图片 | 课程宣传图 | - |
| 年龄段 | 适合年龄范围 | 7-12岁 |
| 课程类型 | 运动项目名称 | 体能+跳绳 |
| 所在小区 | 
| 上课时间 | 具体上课日期和时段 | 周六 08:00-09:00 |
| 成班人数 | 最低开班人数要求 | 满4人成班 |
| 已报人数 | 当前已报名人数 | 9/10人 |
| 操作按钮 | 去拼班 | - |

#### 2.2.4 地图选择功能

**入口**：点击首页定位按钮

**地图界面**：
- 顶部搜索框：输入小区名称搜索
- 地图展示：显示当前位置和周边小区
- 位置标记：显示选中的位置名称

**小区列表界面**：
- 搜索功能：支持模糊搜索
- 列表展示：
  - 小区图片
  - 小区名称
  - 详细地址
  - 距离（单位：千米）
  - 操作按钮：【选择】/【当前小区】
- 小区数据由管理员后台配置

---

### 2.3 课程详情模块

#### 2.3.1 页面结构

**顶部区域**：
- 品牌 Logo：义城上门教育 (YICHENG HOME EDUCATION)
- 功能标签：线上预约、首次付费、教练上门、户外教学、快乐运动

**课程信息区域**：
| 字段 | 说明 | 示例 |
|------|------|------|
| 课程名称 | 年龄段 + 项目名称 | (7-12岁) 体能+跳绳 |
| 课程状态 | 当前状态标签 | 已报名 / 进行中 |
| 上课老师 | 授课教练姓名 | 小黑老师 |
| 课程周期 | 第X周 - 第Y周 | 第1周 - 第5周 |
| 上课周期 | 总周数和课时数 | 共10周，10节课 |
| 上课时间 | 具体时间安排 | 周六 08:00-09:00 |
| 上课地点 | 上课小区位置 | 海口市海南省海口市美兰区桂林横路 |
| 成班截止时间 | 报名截止日期 | 2026-01-01 08:00:00 |

**价格信息区域**：
| 字段 | 说明 |
|------|------|
| 课程单价 | ¥80/节 |
| 权益卡价格 | 会员专享价 ¥39.8/节 |
| 节省金额 | 会员权益卡每节课为您节省 ¥40.2 |

**报名信息区域**：
| 字段 | 说明 |
|------|------|
| 班级人数 | 10人班 |
| 开班要求 | 满4人成班 |
| 剩余名额 | 剩余7个名额 |
| 已报名学员 | 显示已报名学员头像列表 |

**拼班说明**：
1. 支付成功即视为拼班成功
2. 所支付的费用为该产品的实际价格
3. 报名时间截止前随时可申请退款，报名时间截止后费用不退
4. 若遇到不可抗拒因素（天气、场地不满足开班人数等）该班将解散，费用将在10分钟内自动原路返还，无需操作

**底部操作区域**：
- 【分享】：分享课程给好友
- 【客服】：联系在线客服
- 【加入拼班】：进入支付流程

---

### 2.4 报名支付模块

#### 2.4.1 加入拼班页面

**课程信息展示**：
- 课程名称和状态
- 当前周期信息（总周期10周，当前第1周）
- 剩余名额提示
- 上课时间和地点

**学员选择区域**：
- 入口：【请选择加入拼班的学员】
- 已选学员展示：
  - 学员姓名
  - 新人价标识（如适用）
  - 原价和优惠价
  - 赠送保险标识

**费用明细**：
| 项目 | 说明 |
|------|------|
| 课程单价 | ¥80.00/位 |
| 新人价 | 原价 ¥80，优惠价 ¥9.9（如适用） |
| 已优惠 | ¥0 |
| 小计 | ¥80 |
| 总计 | ¥80.00 |

**温馨提示**：
- 如有基础疾病或身体不适，请勿参加本运动项目
- 如未告知而参加，后果需自行承担

**协议确认**：
- 勾选同意《义城上门教育用户协议》

**操作按钮**：
- 【确认支付】：提交订单并进入支付

#### 2.4.2 学员管理页面

**页面标题**：请优先选择学员

**空状态**：
- 提示文案：列表为空
- 引导用户新增学员

**学员列表**：
| 字段 | 说明 |
|------|------|
| 头像 | 学员照片 |
| 姓名 | 学员真实姓名 |
| 会员类型 | 普通会员 / VIP会员 |
| 出生日期 | 格式：YYYY-MM-DD |
| 删除按钮 | 删除该学员 |
| 选择复选框 | 选择参加课程的学员 |

**底部操作**：
- 【新增学员】：跳转到新增学员页面
- 【确认选择】：确认选中的学员

#### 2.4.3 新增学员页面

**页面标题**：学员详情

**表单字段**：
| 字段 | 必填 | 类型 | 说明 |
|------|------|------|------|
| 证件类型 | 是 | 选择 | 默认：身份证 |
| 证件姓名 | 是 | 文本 | 真实姓名 |
| 证件号码 | 是 | 文本 | 身份证号码 |
| 照片 | 否 | 图片 | 学员照片 |
| 出生日期 | 是 | 日期选择 | 出生日期 |
| 性别 | 是 | 选择 | 男/女 |

**重要提示**：
- 个人信息仅用于购买保险使用
- 请填写真实身份信息
- 信息有误将影响保险生效，由此产生的损失自负全责

**操作按钮**：
- 【提交】：保存学员信息

#### 2.4.4 确认支付页面

**订单状态提示**：
- 等待用户支付
- 倒计时提示：订单 X 分 X 秒后将自动取消

**订单信息展示**：
- 课程名称和状态
- 周期信息
- 上课时间和地点
- 费用明细

**支付方式弹窗**：
- 订单支付
- 【发送到手机微信支付】：唤起微信支付
- 【二维码支付】：展示支付二维码

**退款说明**：
- 如遇到拼班未成功的情况，相应的金额会自动原路退回
- 退款时间可能有几秒延迟，请耐心等候
- 支付时如网络状态不佳（如：网络超时）可退出查看拼班记录
- 请勿多次支付以免造成损失
- 如需帮助请联系客服

---

### 2.5 拼班管理模块

#### 2.5.1 页面结构

**顶部标签筛选**：
| 标签 | 说明 |
|------|------|
| 全部 | 显示所有拼班记录 |
| 拼班中 | 正在拼班，等待成班 |
| 待开课 | 已成班，等待开课 |
| 开班中 | 课程进行中 |
| 已完成 | 课程已结束 |
| 已取消 | 已取消的拼班 |

**列表展示**：
- 拼班记录列表
- 空状态提示：列表为空

---

### 2.6 权益卡模块

#### 2.6.1 权益卡展示

**卡片信息**：
| 字段 | 说明 |
|------|------|
| 卡片名称 | 权益卡（季卡） |
| 推荐标签 | 推荐 |
| 活动价格 | 69元 |

**权益说明**：
- 义城上门教育权益卡集合了多种优惠和特权
- 可以在平台上享受超低的会员价和各种特权
- 详情请联系您小区运动主理人咨询

**会员权益**：
- 课程优惠价：会员专享价（如 ¥39.8/节 vs 原价 ¥80/节）
- 每节课节省金额提示

---

### 2.7 个人中心模块

#### 2.7.1 未登录状态

**页面元素**：
- 头像区域：显示默认头像
- 登录入口：【立即登录】
- 【邀请好友】按钮

**资产信息**：
| 项目 | 说明 |
|------|------|
| 健康豆 | 显示数量，默认 0 |
| 优惠券 | 显示数量，默认 0 |

**功能入口**：
| 入口 | 说明 |
|------|------|
| 小区运动主理人 | 事业家庭两不误，立即进入 |
| 我的订单 | 查看历史订单 |
| 邀请好友 | 邀请好友使用 |
| 我的学员 | 管理学员信息 |
| 关于我们 | 平台介绍 |
| 申请主理人 | 申请成为小区代理 |
| 客服 | 联系在线客服 |
| 自动报班 | 自动报班设置 |

#### 2.7.2 已登录状态

**页面元素**：
- 头像区域：显示用户头像
- 手机号显示：如 13692238295
- 【邀请好友】按钮

**其他内容与未登录状态相同**

---

### 2.8 登录模块

#### 2.8.1 登录页面

**页面标题**：登录

**品牌展示**：义城上门教育

**授权说明**：
- 申请使用以下信息
- 获取您的（头像，昵称，地区等）信息

**操作按钮**：
- 【返回首页】：取消登录，返回首页
- 【快捷登录】：使用微信快捷登录

#### 2.8.2 手机号授权

**触发条件**：点击快捷登录

**弹窗内容**：
- 标题：义城上门教育 申请
- 内容：你的手机号码
- 显示微信绑定手机号（部分隐藏）：如 136****8295
- 说明：微信绑定号码

**操作按钮**：
- 【取消】：取消授权
- 【允许】：授权手机号

#### 2.8.3 用户信息授权

**弹窗内容**：
- 标题：微信授权
- 内容：获取您的昵称、头像
- 说明：获取微信头像和昵称，主要用于向用户提供具有辨识度的用户中心界面

**操作按钮**：
- 【拒绝】：拒绝授权
- 【允许】：授权用户信息

---

## 3. 非功能需求

### 3.1 性能需求

| 指标 | 要求 |
|------|------|
| 首页加载时间 | ≤ 2秒 |
| 页面切换响应 | ≤ 500ms |
| 支付响应时间 | ≤ 3秒 |
| 图片加载 | 支持懒加载，占位图展示 |

### 3.2 安全需求

- 用户隐私数据加密存储
- 支付信息通过微信支付安全通道
- 学员身份证信息脱敏展示
- 接口调用需进行身份验证

### 3.3 兼容性需求

- 支持微信版本：8.0 及以上
- 支持 iOS 和 Android 系统
- 适配不同屏幕尺寸

---

## 4. 数据字典

### 4.1 用户信息

| 字段 | 类型 | 说明 |
|------|------|------|
| user_id | string | 用户唯一标识 |
| phone | string | 手机号码 |
| nickname | string | 微信昵称 |
| avatar | string | 头像URL |
| health_beans | number | 健康豆数量 |
| coupons | number | 优惠券数量 |
| is_member | boolean | 是否为会员 |

### 4.2 学员信息

| 字段 | 类型 | 说明 |
|------|------|------|
| student_id | string | 学员唯一标识 |
| user_id | string | 所属用户ID |
| id_type | string | 证件类型 |
| id_name | string | 证件姓名 |
| id_number | string | 证件号码 |
| photo | string | 照片URL |
| birthday | date | 出生日期 |
| gender | string | 性别 |
| member_type | string | 会员类型 |

### 4.3 课程信息

| 字段 | 类型 | 说明 |
|------|------|------|
| course_id | string | 课程唯一标识 |
| name | string | 课程名称 |
| age_range | string | 适合年龄段 |
| teacher | string | 授课老师 |
| total_weeks | number | 总周数 |
| total_lessons | number | 总课时数 |
| schedule | string | 上课时间 |
| location | string | 上课地点 |
| community_id | string | 所属小区ID |
| price | number | 课程单价 |
| member_price | number | 会员价 |
| min_students | number | 最低成班人数 |
| max_students | number | 最大班级人数 |
| deadline | datetime | 报名截止时间 |
| status | string | 课程状态 |

### 4.4 小区信息

| 字段 | 类型 | 说明 |
|------|------|------|
| community_id | string | 小区唯一标识 |
| name | string | 小区名称 |
| address | string | 详细地址 |
| image | string | 小区图片URL |
| latitude | number | 纬度 |
| longitude | number | 经度 |

### 4.5 订单信息

| 字段 | 类型 | 说明 |
|------|------|------|
| order_id | string | 订单唯一标识 |
| user_id | string | 用户ID |
| course_id | string | 课程ID |
| student_ids | array | 学员ID列表 |
| total_amount | number | 订单总金额 |
| discount_amount | number | 优惠金额 |
| pay_amount | number | 实付金额 |
| status | string | 订单状态 |
| pay_time | datetime | 支付时间 |
| created_at | datetime | 创建时间 |

---

## 5. 页面流程图

```
┌─────────────────────────────────────────────────────────────────┐
│                        启动流程                                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  启动小程序 → 隐私保护提示 → 地理位置授权 → 首页                    │
│                    │                │                           │
│                  拒绝              拒绝                          │
│                    ↓                ↓                           │
│                  退出          手动选择位置                       │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                        报名流程                                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  首页 → 课程列表 → 课程详情 → 加入拼班 → 选择学员 → 确认支付       │
│                                          │                      │
│                                        新增学员                  │
│                                          │                      │
│                                        提交信息                  │
│                                          │                      │
│                                        返回选择                  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                        登录流程                                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  我的页 → 立即登录 → 登录页 → 快捷登录 → 手机号授权 → 用户信息授权  │
│                        │                                        │
│                    返回首页                                      │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 6. 后台管理需求（简述）

管理员后台需要支持以下功能：

1. **小区管理**：添加、编辑、删除可服务的小区
2. **课程管理**：发布、编辑、下架拼班课程
3. **订单管理**：查看订单、处理退款
4. **用户管理**：查看用户信息、会员管理
5. **学员管理**：查看学员信息
6. **主理人管理**：审核主理人申请
7. **权益卡管理**：设置权益卡价格和权益
8. **轮播图管理**：配置首页轮播图内容

---

## 7. 版本规划

### v1.0 （MVP）
- 用户端核心功能
- 课程浏览和报名
- 微信支付集成
- 基础会员体系

### v1.1
- 主理人端功能
- 邀请好友奖励
- 健康豆积分系统

### v1.2
- 自动报班功能
- 课程评价系统
- 消息通知优化

---

## 附录

### A. 术语表

| 术语 | 说明 |
|------|------|
| 拼班 | 多个用户一起报名同一课程，达到最低人数后开班 |
| 主理人 | 小区代理人，负责推广和组织小区内的课程 |
| 权益卡 | 会员卡，购买后可享受课程优惠价 |
| 健康豆 | 平台积分，可用于抵扣或兑换 |

### B. 参考文档

- UI 设计稿：`specs/ui/` 目录下所有图片文件
- 原始需求：`specs/idea.md`
