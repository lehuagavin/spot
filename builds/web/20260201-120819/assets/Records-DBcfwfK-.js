import{r as s,z as f,t as e}from"./index-vJliTLcA.js";import{a as y}from"./members-CRQYknad.js";import{D as v}from"./DefaultAvatar-BHbKO5BL.js";import{M as j}from"./index-CVB0USnY.js";import{d as i}from"./Pagination-BDGMd9qO.js";import{F as b}from"./Table-CXsedqLq.js";import{T as o}from"./index-Bt7cSXZv.js";import"./upload-BK1CmKxZ.js";function C(){const[d,n]=s.useState(!1),[l,c]=s.useState([]),[m,p]=s.useState(0),[a,u]=s.useState({page:1,page_size:10});s.useEffect(()=>{x()},[a]);const x=async()=>{n(!0);try{const t=await y(a);c(t.items),p(t.total)}catch{f.error("获取购买记录失败")}finally{n(!1)}},g=t=>{u({...a,page:t.current||1,page_size:t.pageSize||10})},h=[{title:"用户",key:"user",render:(t,r)=>e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(v,{src:r.user?.avatar??void 0,name:r.user?.nickname??void 0,type:"member",size:36,style:{marginRight:10}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:r.user?.nickname||"未设置昵称"}),e.jsx("div",{style:{color:"var(--color-text-secondary)",fontSize:12},children:r.user?.phone||"-"})]})]})},{title:"权益卡",key:"member_card",render:(t,r)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:r.member_card?.name||"-"}),e.jsx(o,{color:"blue",style:{marginTop:4},children:r.member_card?.type?j[r.member_card.type]:"-"})]})},{title:"有效期",key:"validity",render:(t,r)=>e.jsxs("div",{children:[e.jsx("div",{children:i(r.start_date).format("YYYY-MM-DD")}),e.jsxs("div",{style:{color:"var(--color-text-secondary)"},children:["至 ",i(r.end_date).format("YYYY-MM-DD")]})]})},{title:"状态",dataIndex:"status",key:"status",render:(t,r)=>i(r.end_date).isBefore(i())?e.jsx(o,{color:"default",children:"已过期"}):t===1?e.jsx(o,{color:"success",children:"生效中"}):e.jsx(o,{color:"default",children:"已失效"})},{title:"购买时间",dataIndex:"created_at",key:"created_at",render:t=>i(t).format("YYYY-MM-DD HH:mm")}];return e.jsxs("div",{className:"fade-in",children:[e.jsx("div",{style:{marginBottom:24,display:"flex",alignItems:"center",justifyContent:"space-between",backgroundImage:"linear-gradient(135deg, rgba(255,255,255,0.85) 0%, rgba(255,255,255,0.7) 100%), url(/images/member-vip.png)",backgroundSize:"cover, cover",backgroundPosition:"center, center",borderRadius:"var(--radius-lg)",padding:"24px 32px"},children:e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"var(--font-size-2xl)",fontWeight:600,color:"var(--color-text-primary)",marginBottom:4},children:"购买记录"}),e.jsx("p",{style:{color:"var(--color-text-secondary)"},children:"查看会员权益卡购买记录"})]})}),e.jsx(b,{columns:h,dataSource:l,rowKey:"id",loading:d,pagination:{current:a.page,pageSize:a.page_size,total:m,showSizeChanger:!0,showQuickJumper:!0,showTotal:t=>`共 ${t} 条`},onChange:g})]})}export{C as default};
